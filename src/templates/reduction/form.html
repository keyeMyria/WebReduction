{% extends "base.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block header %}
{{ block.super }}
{% endblock header %}

{% block breadcrumbs %}
<div class="container">
    <ol class="breadcrumb">
        <li><a href="{% url 'index' %}">Home</a></li>
        <li><a href="{% url 'reduction:list' %}">Reduction</a></li>
        <li class="active">{%if object %}{{object}}{% else %} new {% endif%}</li>
    </ol>
</div>
{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>Reduction General <small> <strong>{{user.profile.ipts}}</strong> {%if user.profile.experiment %} / <strong>{{user.profile.experiment}} </strong> {% endif %} :: new</small></h1>
    </div>


    <form method="post" action="" class="form-horizontal" onsubmit="return populateFormWithHotContents();">

        <!-- The form part -->
        {{ formset.management_form }}
        <div class="well">
            <div class="panel-body">
                {% crispy form  %}
            </div>
        </div>


        <div class="well">
            {% for f in formset %}
            <div class="panel-body">
                {% crispy f f.helper %}
                <li>{{ f.DELETE }}</li>
            </div>
            <hr />
            {% endfor %}
        </div>


        <hr />

        <button name="save" type="submit" class="btn btn-primary" data-toggle="tooltip" data-placement="top"
            title="Saves the reduction and go back to the list of reductions.">Save</button>
        <button name="run" type="submit" class="btn btn-info" data-toggle="tooltip" data-placement="top"
            title="Saves the reduction and generates the python script and prepares the job for submission.">Run...</button>
        <button type="cancel" class="btn btn-default" onclick="window.history.back()" >Cancel</button>

    </form>

</div>
{% endblock %}

{% block footer_js%}
{{ block.super }}
{% endblock %}
